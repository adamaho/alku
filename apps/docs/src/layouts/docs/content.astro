---
import type { MarkdownHeading } from "astro";

import TableOfContents from "./toc/toc.astro";

type Props = {
  title: string;
  description: string;
  headings: MarkdownHeading[];
};

const { title, description, headings } = Astro.props;
---

<main class="wui-docs-layout-content">
  <div class="wui-docs-content-paper">
    <article class="wui-docs-content-paper-article" transition:animate="none">
      <div class="wui-docs-article-heading">
        <h1 class="wui-docs-article-title">{title}</h1>
        <p class="wui-docs-article-description">{description}</p>
      </div>
      <div class="wui-markdown-content">
        <slot />
      </div>
    </article>
    <aside class="wui-docs-minimap">
      <TableOfContents headings={headings} />
    </aside>
  </div>
</main>

<style>
  .wui-docs-layout-content {
    background: var(--wui-docs-layout-background);
    padding-left: var(--wui-docs-layout-sidebar-width);
    padding-right: var(--wui-space-4);
    padding-top: var(--wui-space-4);
    padding-bottom: var(--wui-space-4);
    width: 100%;

    .wui-docs-content-paper {
      --wui-docs-content-paper-padding-block: var(--wui-space-9);

      align-items: flex-start;
      background: var(--wui-color-white);
      border: var(--wui-border-width-1) solid var(--wui-color-grey-4);
      border-radius: min(var(--wui-border-radius-4), 20px);
      box-shadow: -2px 0 16px -2px hsl(var(--wui-shadow-color) /
            calc(var(--wui-shadow-strength) + 10%));
      display: flex;
      gap: var(--wui-space-9);
      min-height: 100%;
      padding-left: var(--wui-space-9);
      padding-right: var(--wui-space-9);
      padding-block: var(--wui-docs-content-paper-padding-block);

      @media (min-width: 1024px) {
        padding-right: var(--wui-space-6);
      }

      .wui-docs-content-paper-article {
        margin-inline: auto;
        width: 100%;
        max-width: 640px;

        .wui-docs-article-heading {
          margin-bottom: var(--wui-space-9);

          .wui-docs-article-title {
            color: var(--wui-color-grey-12);
            font-size: var(--wui-font-size-8);
            letter-spacing: var(--wui-letter-spacing-9);
            font-weight: var(--wui-font-weight-medium);
          }

          .wui-docs-article-description {
            color: var(--wui-color-grey-11);
            font-size: var(--wui-font-size-4);
            line-height: var(--wui-line-height-4);
            margin-top: var(--wui-space-2);
          }
        }

        .wui-markdown-content {
          --wui-markdown-content-font-size: calc(15px * var(--wui-scale));

          p:not(:where(.not-content *)) {
            color: var(--wui-color-grey-12);
            font-size: var(--wui-markdown-content-font-size);
            font-weight: var(--wui-font-weight-normal);
            line-height: var(--wui-line-height-3);
            margin: var(--wui-space-6) auto;
          }

          h2 + p {
            margin-bottom: var(--wui-space-7);
            margin-top: var(--wui-space-5);
          }

          .astro-code {
            border-radius: var(--wui-border-radius-2);
            border-width: var(--wui-border-width-1);
            border-style: solid;
            font-family: var(--wui-font-family-mono);
            font-size: var(--wui-font-size-2);
            padding: var(--wui-space-3);
            margin: var(--wui-space-6) auto;
          }
        }
      }

      .wui-docs-minimap {
        display: none;
        max-width: 250px;
        position: sticky;
        top: calc(
          var(--wui-docs-content-paper-padding-block) + var(--wui-space-4)
        );
        width: 100%;

        @media (min-width: 1280px) {
          display: block;
        }
      }
    }
  }
</style>
