---
import Demo from "../../../../components/demo.astro";
---

<script>
  const radioItems = document.querySelectorAll<HTMLInputElement>(
    "input[type='radio'].accent-color-radio-item",
  );

  const demoElement = document.querySelector(
    "div.accent-color-demo",
  ) as HTMLDivElement;

  const selectedAccentColorElement = document.querySelector(
    ".selected-accent-color",
  ) as HTMLDivElement;

  /**
   * Handle select change event
   */
  function handleSelectChange(e: Event) {
    const accentColor = (e?.target as HTMLInputElement).value;
    demoElement.setAttribute("data-accent-color", accentColor);
    selectedAccentColorElement.setAttribute("data-accent-color", accentColor);
    selectedAccentColorElement.innerHTML = `data-accent-color="${accentColor}"`;
  }

  /**
   * Subscribe to change event on select element
   */
  for (const item of radioItems) {
    item.addEventListener("change", handleSelectChange);
  }
</script>

<Demo>
  <div slot="header" class="accent-color-demo-header">
    <div class="accent-color-radio-group" data-accent-color="red">
      {
        [
          "red",
          "orange",
          "yellow",
          "green",
          "blue",
          "purple",
          "pink",
          "brand",
        ].map((color) => {
          return (
            <label
              class="accent-color-radio-item-label"
              data-accent-color={color}
              for={color}
              aria-label={color}
            >
              <input
                class="accent-color-radio-item"
                type="radio"
                id={color}
                value={color}
                checked={color === "red"}
                name="accent-color"
              />
            </label>
          );
        })
      }
    </div>
    <code class="selected-accent-color" data-accent-color="red"
      >data-accent-color="red"</code
    >
  </div>

  <div class="accent-color-demo" data-accent-color="red">
    <button class="accent-color-demo-button">Sign up</button>
  </div>
</Demo>

<style>
  .accent-color-demo-header {
    align-items: center;
    display: flex;

    .accent-color-radio-group {
      align-items: center;
      display: flex;
      flex: 1;
      gap: var(--ak-space-3);

      .accent-color-radio-item {
        opacity: 0;
      }

      .accent-color-radio-item-label {
        background: var(--ak-accent-color-7);
        border-radius: var(--ak-border-radius-round);
        display: block;
        height: 18px;
        width: 18px;

        &:has(input[type="radio"]:checked) {
          background: var(--ak-accent-color-9);
        }

        &:has(input[type="radio"]:focus-visible) {
          outline: var(--ak-border-width-2) solid var(--ak-accent-color-10);
          outline-offset: 2px;
        }
      }
    }
    .selected-accent-color {
      background-color: var(--ak-accent-color-a3);
      border-radius: var(--ak-border-radius-2);
      color: var(--ak-accent-color-11);
      font-size: var(--ak-font-size-2);
      font-family: var(--ak-font-family-mono);
      line-height: var(--ak-line-height-2);
      padding-inline: var(--ak-space-2);
    }
  }
  .accent-color-demo-button {
    background: linear-gradient(
      to bottom,
      var(--ak-accent-color-9),
      var(--ak-accent-color-10)
    );
    border: var(--ak-border-width-1) solid var(--ak-accent-color-9);
    border-radius: var(--ak-border-radius-3);
    box-shadow:
      inset 0 -1px 1px 0px var(--ak-color-grey-a9),
      inset 0 1px 1px 0px var(--ak-color-white-a9);
    color: var(--ak-accent-color-contrast);
    font-size: var(--ak-font-size-2);
    font-weight: var(--ak-font-weight-medium);
    height: 32px;
    padding-inline: var(--ak-space-3);
    text-shadow: 0 0.5px var(--ak-color-grey-a9);

    &:hover {
      background: var(--ak-accent-color-10);
    }

    &:focus-visible {
      background: var(--ak-accent-color-10);
      border-color: var(--ak-accent-color-10);
      outline: var(--ak-border-width-2) solid var(--ak-accent-color-10);
      outline-offset: var(--ak-space-1);
    }

    &:active {
      background: var(--ak-accent-color-10);
      border-color: var(--ak-accent-color-10);
      box-shadow:
        inset 0 -1px 1px 0px var(--ak-color-white-a7),
        inset 0 1px 1px 0px var(--ak-color-grey-a7);
      padding-top: 1px;
    }
  }
</style>
